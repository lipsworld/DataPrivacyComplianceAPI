(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 10.1' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[     31533,        800]
NotebookOptionsPosition[     28120,        680]
NotebookOutlinePosition[     28479,        696]
CellTagsIndexPosition[     28436,        693]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{

Cell[CellGroupData[{
Cell["Data Privacy Compliance API", "Title",
 CellChangeTimes->{{3.645620664134832*^9, 3.645620673498*^9}}],

Cell[CellGroupData[{

Cell["API Framework", "Chapter",
 CellChangeTimes->{{3.6448319693950377`*^9, 3.6448319736902943`*^9}, {
  3.645616758893923*^9, 3.645616765714375*^9}, {3.645620686492127*^9, 
  3.645620688407069*^9}, {3.645620725376898*^9, 3.6456207310596313`*^9}}],

Cell[CellGroupData[{

Cell["Summary", "Section",
 CellChangeTimes->{{3.645186069784831*^9, 3.645186073080556*^9}},
 CellID->1862578396],

Cell["\<\
This codebase collects laws relating to data privacy and protection, in order \
to make compliance risk assessments about the handling of personal \
information.  The fundamental output is a color coded risk assessment (green, \
yellow, orange, or red) of the regulatory risks generated by a proposed use \
of someone\[CloseCurlyQuote]s personal information.  The interface to this \
knowledge base is a REST web service API. 

Basic web service inputs:

  * 
  
Basic outputs:

  * 
  
Summary of risks assessed:

  * \
\>", "Text",
 CellChangeTimes->{{3.644832246743161*^9, 3.6448324022970448`*^9}, {
  3.644832436002811*^9, 3.6448326619019213`*^9}, {3.644832723598897*^9, 
  3.644832785282281*^9}, {3.644832912239747*^9, 3.644832922132275*^9}, {
  3.6448332199154243`*^9, 3.6448332907576714`*^9}, {3.644833359688204*^9, 
  3.644833404023303*^9}, {3.644833453004012*^9, 3.644833455730523*^9}, {
  3.6451913428169317`*^9, 3.645191343677548*^9}, {3.645617107507268*^9, 
  3.645617144776133*^9}, {3.6456173547372828`*^9, 3.6456175084090567`*^9}, {
  3.645617551164604*^9, 3.6456176052301064`*^9}}]
}, Closed]],

Cell[CellGroupData[{

Cell["API", "Section",
 CellChangeTimes->{{3.645618842897027*^9, 3.645618870849587*^9}},
 CellID->37],

Cell[CellGroupData[{

Cell["Definition", "Subsection",
 CellChangeTimes->{{3.6456193593593273`*^9, 3.645619365022546*^9}}],

Cell["Define the form:", "Text",
 CellChangeTimes->{{3.643367021035542*^9, 3.643367023611508*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"api", "=", " ", 
   RowBox[{"APIFunction", "[", 
    RowBox[{
     RowBox[{"{", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{
        RowBox[{"{", 
         RowBox[{"\"\<Location\>\"", ",", "\"\<Latitude/longitude\>\""}], 
         "}"}], " ", "\[Rule]", " ", 
        RowBox[{"<|", 
         RowBox[{
          RowBox[{
          "\"\<Interpreter\>\"", "\[Rule]", "\"\<GeoCoordinates\>\""}], " ", 
          ",", 
          RowBox[{"\"\<Required\>\"", "\[Rule]", "False"}]}], "|>"}]}], ",", 
       "  ", "\[IndentingNewLine]", 
       RowBox[{"\"\<SubjectAge\>\"", "\[Rule]", " ", 
        RowBox[{"<|", 
         RowBox[{
          RowBox[{"\"\<Interpreter\>\"", "\[Rule]", "\"\<Number\>\""}], ",", 
          RowBox[{"\"\<Required\>\"", "\[Rule]", "False"}]}], "|>"}]}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"\"\<ProcessingPurpose\>\"", "\[Rule]", " ", 
        RowBox[{"<|", 
         RowBox[{
          RowBox[{"\"\<Interpreter\>\"", " ", "\[Rule]", " ", 
           RowBox[{"{", 
            RowBox[{
            "\"\<A\>\"", ",", " ", "\"\<B\>\"", ",", " ", "\"\<C\>\""}], 
            "}"}]}], ",", 
          RowBox[{"\"\<Required\>\"", "\[Rule]", "False"}]}], "|>"}]}]}], 
      "\[IndentingNewLine]", "}"}], ",", " ", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"assess", "[", "#", "]"}], "&"}], ",", "\"\<JSON\>\""}], 
    "\[IndentingNewLine]", "]"}]}], ";"}]], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.644574045759515*^9, 3.644574046307605*^9}, {
   3.644575592216618*^9, 3.6445756001250687`*^9}, {3.6445758534454813`*^9, 
   3.644575862005395*^9}, {3.644575898313633*^9, 3.6445759228442583`*^9}, {
   3.6445759568570843`*^9, 3.644575959177649*^9}, 3.644581824156438*^9, {
   3.644581885791933*^9, 3.644581886469577*^9}, {3.644583876319624*^9, 
   3.6445838791218653`*^9}, {3.6446310291088247`*^9, 3.644631041021242*^9}, {
   3.644631086136525*^9, 3.6446310903245287`*^9}, {3.644631170524818*^9, 
   3.644631216078376*^9}, 3.644631459804142*^9, {3.644631503465231*^9, 
   3.644631546146991*^9}, {3.644631697727284*^9, 3.644631700134143*^9}, {
   3.645617018352759*^9, 3.645617094841508*^9}}],

Cell[BoxData[""], "Input",
 CellChangeTimes->{{3.645192568419191*^9, 3.6451925686703997`*^9}}]
}, Open  ]],

Cell[CellGroupData[{

Cell["Deployment", "Subsection",
 CellChangeTimes->{{3.645619369299262*^9, 3.645619374002198*^9}}],

Cell["Deploy the API:", "Text",
 CellChangeTimes->{{3.643367033132497*^9, 3.643367046270019*^9}, 
   3.643367342067822*^9, {3.6446310114166813`*^9, 3.644631012470223*^9}, 
   3.645192566512492*^9}],

Cell[BoxData[
 RowBox[{
  RowBox[{"CloudDeploy", "[", 
   RowBox[{"api", ",", "\"\<privacy_API\>\"", ",", " ", 
    RowBox[{"Permissions", " ", "\[Rule]", " ", "\"\<Public\>\""}]}], "]"}], 
  " "}]], "Input",
 CellChangeTimes->{{3.643367077704754*^9, 3.643367081514983*^9}, {
  3.643367254636405*^9, 3.643367257657392*^9}, {3.643369290084248*^9, 
  3.643369291787141*^9}, {3.643384577373993*^9, 3.643384578809173*^9}, {
  3.644630995838369*^9, 3.644631034548546*^9}, {3.645616984344252*^9, 
  3.645616985061955*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"CloudDeploy", "[", 
   RowBox[{"api", ",", "\"\<privacy_API_test\>\"", ",", " ", 
    RowBox[{"Permissions", " ", "\[Rule]", " ", "\"\<Public\>\""}]}], "]"}], 
  " "}]], "Input",
 CellChangeTimes->{{3.643367077704754*^9, 3.643367081514983*^9}, {
  3.643367254636405*^9, 3.643367257657392*^9}, {3.643369290084248*^9, 
  3.643369291787141*^9}, {3.643384577373993*^9, 3.643384578809173*^9}, {
  3.644630995838369*^9, 3.644631034548546*^9}, {3.6447096677791452`*^9, 
  3.644709668721702*^9}, {3.6456169885006237`*^9, 3.6456169892247267`*^9}}],

Cell[BoxData[""], "Input",
 CellChangeTimes->{{3.645192589152809*^9, 3.645192589488543*^9}}]
}, Open  ]]
}, Closed]],

Cell[CellGroupData[{

Cell["Risk Assessment", "Section",
 CellChangeTimes->{{3.645618842897027*^9, 3.645618843515242*^9}, {
  3.645620400554632*^9, 3.645620409377584*^9}},
 CellID->922705572],

Cell[CellGroupData[{

Cell["High-level control", "Subsection",
 CellChangeTimes->{{3.645619439457466*^9, 3.645619441860159*^9}}],

Cell["Determines the main output of the API:", "Text",
 CellChangeTimes->{{3.6446314370495234`*^9, 3.644631440966371*^9}, {
  3.644672582319375*^9, 3.644672654294207*^9}, {3.6446727376590014`*^9, 
  3.644672741043552*^9}, {3.6456176566337643`*^9, 3.645617667164116*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"assess", "[", "input_Association", "]"}], " ", ":=", " ", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "result", ",", " ", "risks", ",", "reasonList", ",", " ", "text", ",", 
       "start", ",", "end", ",", " ", "color"}], "}"}], ",", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"start", " ", "=", " ", 
       RowBox[{"AbsoluteTime", "[", "]"}]}], ";", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", 
      RowBox[{"risks", " ", "=", " ", 
       RowBox[{"riskFactors", "[", 
        RowBox[{"input", ",", 
         RowBox[{"<|", "|>"}]}], "]"}]}], ";", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", 
      RowBox[{"color", " ", "=", " ", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"factsAreOutOfScope", "[", "input", "]"}], ",", 
         "\"\<Black\>\"", ",", 
         RowBox[{"colorCode", "[", "risks", "]"}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"text", " ", "=", " ", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"factsAreOutOfScope", "[", "input", "]"}], ",", 
         RowBox[{
         "{", "\"\<Application does not handle that scenario\>\"", "}"}], ",", 
         RowBox[{"colorCodeText", "[", "color", "]"}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"reasonList", " ", "=", " ", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"factsAreOutOfScope", "[", "input", "]"}], ",", 
         RowBox[{"{", "}"}], ",", 
         RowBox[{"riskFactorsInOrder", "[", "risks", "]"}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"end", " ", "=", " ", 
       RowBox[{"AbsoluteTime", "[", "]"}]}], ";", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", 
      RowBox[{"result", " ", "=", " ", 
       RowBox[{"<|", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"\"\<assessment\>\"", "\[Rule]", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"\"\<colorCode\>\"", "\[Rule]", " ", "color"}], ",", 
            RowBox[{"\"\<text\>\"", "\[Rule]", " ", "text"}], ",", 
            RowBox[{"\"\<reasons\>\"", "\[Rule]", " ", "reasonList"}]}], 
           "}"}]}], ",", " ", "\[IndentingNewLine]", 
         RowBox[{"\"\<processingTimeInSeconds\>\"", "\[Rule]", " ", 
          RowBox[{"end", "-", "start"}]}]}], "\[IndentingNewLine]", "|>"}]}], 
      ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"Return", "[", "result", "]"}], ";"}]}], "\[IndentingNewLine]", 
    "]"}]}], ";"}]], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.6446314469457808`*^9, 3.644631451064961*^9}, {
   3.644631651670355*^9, 3.644631656128409*^9}, {3.6446317412698298`*^9, 
   3.644631750284965*^9}, {3.644631782201839*^9, 3.6446317848650503`*^9}, 
   3.6446318398175573`*^9, {3.644631904978101*^9, 3.6446319078762302`*^9}, {
   3.644632389964216*^9, 3.644632399088951*^9}, {3.64463243455303*^9, 
   3.644632492665372*^9}, {3.644632523530702*^9, 3.6446325370056143`*^9}, {
   3.644632631758572*^9, 3.644632644291695*^9}, {3.644633042975204*^9, 
   3.644633063408182*^9}, {3.644672549058544*^9, 3.644672562016873*^9}, {
   3.644672675768485*^9, 3.644672730155539*^9}, {3.644672771839531*^9, 
   3.644672800029681*^9}, {3.6446728660887527`*^9, 3.644673004805045*^9}, {
   3.644673047855*^9, 3.644673065219598*^9}, {3.644673221672044*^9, 
   3.6446733239531193`*^9}, {3.644673372697592*^9, 3.644673382649694*^9}, {
   3.644673415721698*^9, 3.6446735322112207`*^9}, {3.64467362749397*^9, 
   3.6446736505512953`*^9}, 3.6446736810770693`*^9, {3.64467371872383*^9, 
   3.644673819728106*^9}, {3.644673954539616*^9, 3.644674015909148*^9}, {
   3.644674066986147*^9, 3.6446740907717543`*^9}, {3.6446741426603527`*^9, 
   3.644674211931287*^9}, {3.644675735072023*^9, 3.644675736383377*^9}, {
   3.644675783523409*^9, 3.6446757930187397`*^9}, {3.644675864997056*^9, 
   3.644675914168376*^9}, {3.644675968117776*^9, 3.644676060287014*^9}, 
   3.644676206225621*^9, {3.644676303945681*^9, 3.644676341674672*^9}, {
   3.6446763958307333`*^9, 3.644676431050127*^9}, {3.644676464921217*^9, 
   3.644676468710795*^9}, {3.644676514301127*^9, 3.644676527606367*^9}, {
   3.644684943730843*^9, 3.644684948723921*^9}, {3.644685827553713*^9, 
   3.6446858856059217`*^9}, {3.644686314682035*^9, 3.644686318325494*^9}, {
   3.6446880445891047`*^9, 3.64468805170138*^9}, {3.644690414050041*^9, 
   3.644690428865735*^9}, {3.6446905693464127`*^9, 3.644690580681368*^9}, {
   3.6446906505592337`*^9, 3.644690696662136*^9}, {3.6446920673851137`*^9, 
   3.64469206847338*^9}, {3.644692876693088*^9, 3.6446928770663424`*^9}, {
   3.644692982198745*^9, 3.644693046992128*^9}, {3.644693101580626*^9, 
   3.644693105123662*^9}, {3.64469766383724*^9, 3.644697698117021*^9}, {
   3.644697729114633*^9, 3.64469777955921*^9}, {3.6446989376632853`*^9, 
   3.6446989382577057`*^9}, {3.644700290448558*^9, 3.644700295103368*^9}, {
   3.644709701212243*^9, 3.644709703023995*^9}, {3.6447118582451887`*^9, 
   3.644711875731855*^9}, {3.644771925193624*^9, 3.644771932338827*^9}, 
   3.644771980318468*^9, {3.644772082948289*^9, 3.644772105687841*^9}, {
   3.6447734654648113`*^9, 3.644773484683899*^9}, {3.644774688335103*^9, 
   3.644774692195345*^9}, 3.644786558747037*^9, {3.644831327801409*^9, 
   3.6448313791614437`*^9}, {3.644847971777052*^9, 3.64484804778074*^9}, {
   3.644848078568617*^9, 3.644848090667048*^9}, {3.644848738716831*^9, 
   3.644848855131669*^9}, {3.64518743878937*^9, 3.645187475844242*^9}, {
   3.645187563366782*^9, 3.645187565625669*^9}, {3.645188074382957*^9, 
   3.6451880759958963`*^9}, {3.645188189838882*^9, 3.64518822073438*^9}, {
   3.645188316833824*^9, 3.645188422272794*^9}, {3.645188474774201*^9, 
   3.64518847571798*^9}, {3.645188541212751*^9, 3.6451885446427317`*^9}, {
   3.645188611138052*^9, 3.6451886532173443`*^9}, {3.6451908193035383`*^9, 
   3.6451909297231827`*^9}, {3.645191005757175*^9, 3.6451910448463182`*^9}, {
   3.6451912478741693`*^9, 3.64519125299122*^9}, {3.6451913681391897`*^9, 
   3.645191377725054*^9}, {3.645191423931196*^9, 3.645191426854158*^9}, {
   3.645360334868247*^9, 3.645360394040555*^9}, {3.645361619880562*^9, 
   3.6453616572555437`*^9}, {3.645361825134472*^9, 3.645361875311274*^9}, {
   3.645362373741886*^9, 3.6453623781693487`*^9}, {3.645363981673993*^9, 
   3.64536399297965*^9}, {3.6453954520598392`*^9, 3.645395464848185*^9}, {
   3.6453955067438297`*^9, 3.6453955322650213`*^9}, 3.645395594787835*^9, {
   3.645396042927341*^9, 3.645396043511743*^9}, {3.6456170837099247`*^9, 
   3.645617084510314*^9}, {3.6456176814119663`*^9, 3.6456177300180397`*^9}, {
   3.645618564484559*^9, 3.64561857807751*^9}, {3.645620332754027*^9, 
   3.645620333786075*^9}}],

Cell[BoxData[""], "Input",
 CellChangeTimes->{{3.645619449453641*^9, 3.6456194498161507`*^9}}]
}, Open  ]],

Cell[CellGroupData[{

Cell["Identify out-of-scope scenarios", "Subsection",
 CellChangeTimes->{{3.6456201957046633`*^9, 3.645620200691414*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"factsAreOutOfScope", "[", "facts_Association", "]"}], ":=", 
  RowBox[{"Block", "[", 
   RowBox[{
    RowBox[{"{", "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{"If", " ", "[", 
     RowBox[{"condition", ",", "True", ",", "False"}], "]"}]}], 
   "\[IndentingNewLine]", "]"}]}]], "Input",
 CellChangeTimes->{{3.6451906116257467`*^9, 3.645190720929844*^9}, {
   3.645618619262197*^9, 3.645618620061393*^9}, 3.645619311160927*^9}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"factsAreOutOfScope", "[", 
  RowBox[{"\[LeftAssociation]", "\[RightAssociation]"}], "]"}]], "Input",
 CellChangeTimes->{{3.6451907570348387`*^9, 3.64519080834313*^9}, 
   3.645619303899358*^9}],

Cell[BoxData["True"], "Output",
 CellChangeTimes->{{3.645190799166287*^9, 3.645190808865266*^9}}]
}, Open  ]],

Cell[BoxData[""], "Input",
 CellChangeTimes->{{3.644771277580636*^9, 3.644771279127574*^9}}]
}, Open  ]],

Cell[CellGroupData[{

Cell["Apply laws to facts", "Subsection",
 CellChangeTimes->{{3.644836698761153*^9, 3.64483670035527*^9}, {
  3.6448417292373343`*^9, 3.644841738747141*^9}, {3.644852620210682*^9, 
  3.644852626399335*^9}, {3.645620223434514*^9, 3.645620225347007*^9}}],

Cell["\<\
Determines general and regulatory risks and returns the response as a list of \
risk factors, i.e. {risk, description}. \
\>", "Text",
 CellChangeTimes->{{3.644836825964726*^9, 3.644836869580249*^9}, {
  3.644837368814666*^9, 3.644837387999702*^9}, {3.6448374440379057`*^9, 
  3.644837446926684*^9}, {3.6448427283077507`*^9, 3.644842743606489*^9}, {
  3.644845169597953*^9, 3.644845202877666*^9}, {3.644846255364609*^9, 
  3.644846267367031*^9}, {3.644847265655501*^9, 3.644847274460773*^9}, {
  3.6448528638019876`*^9, 3.644852874143786*^9}, {3.645189376234542*^9, 
  3.645189384909384*^9}, {3.645618629606084*^9, 3.645618630717329*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"riskFactors", "[", 
   RowBox[{"facts_Association", ",", " ", "rules_Association"}], "]"}], ":=", 
  " ", 
  RowBox[{"Block", "[", 
   RowBox[{
    RowBox[{"{", "}"}], ",", "\[IndentingNewLine]", "\[IndentingNewLine]", 
    "\[IndentingNewLine]", 
    RowBox[{"DeleteCases", "[", 
     RowBox[{
      RowBox[{"{", "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"If", "[", 
        RowBox[{"failsSomeTest", ",", 
         RowBox[{"{", 
          RowBox[{"0.5", ",", "\"\<Reason it failed\>\""}], "}"}]}], "]"}], 
       "\[IndentingNewLine]", "\[IndentingNewLine]", "}"}], ",", " ", 
      "Null"}], "]"}]}], "\[IndentingNewLine]", "]"}]}]], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.644836815809553*^9, 3.6448368179786882`*^9}, {
   3.644844583954937*^9, 3.644844587619371*^9}, {3.644844739707883*^9, 
   3.644844774675818*^9}, {3.644844841985259*^9, 3.6448448566393843`*^9}, {
   3.64484502546955*^9, 3.64484516312206*^9}, {3.644845226158826*^9, 
   3.644845291534335*^9}, {3.6448457770717773`*^9, 3.644845838415386*^9}, {
   3.644846401697742*^9, 3.644846499089821*^9}, {3.644846542039991*^9, 
   3.6448465792674313`*^9}, {3.644846611432538*^9, 3.644846863874113*^9}, {
   3.644846925242003*^9, 3.6448469741025*^9}, {3.644847017305275*^9, 
   3.6448470942409678`*^9}, {3.644847137550461*^9, 3.6448471479868813`*^9}, {
   3.6448471945635777`*^9, 3.6448472359255743`*^9}, {3.6448472828052263`*^9, 
   3.6448474081858053`*^9}, 3.644847482217268*^9, {3.6448526625078917`*^9, 
   3.6448527220445833`*^9}, {3.644852805815423*^9, 3.644852879443945*^9}, {
   3.645185951497513*^9, 3.645185953111906*^9}, {3.645187530041457*^9, 
   3.6451875435738907`*^9}, 3.64518762925675*^9, {3.645187672953146*^9, 
   3.6451877000265827`*^9}, {3.645187748974332*^9, 3.6451877520145187`*^9}, {
   3.645187955910469*^9, 3.64518795934538*^9}, {3.645189551416204*^9, 
   3.645189582092209*^9}, {3.6451896280790567`*^9, 3.645189702650764*^9}, {
   3.645192324345559*^9, 3.6451923439730167`*^9}, 3.645192482236207*^9, {
   3.645192951828541*^9, 3.64519301568187*^9}, {3.645193052189189*^9, 
   3.645193083175956*^9}, {3.645193124318417*^9, 3.645193319566761*^9}, {
   3.645193409440569*^9, 3.645193447888287*^9}, {3.6451935023459473`*^9, 
   3.645193525198255*^9}, {3.645193566801429*^9, 3.645193573582521*^9}, {
   3.645618642649796*^9, 3.645618644840931*^9}, {3.6456187278515997`*^9, 
   3.645618782419726*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"riskFactors", "[", 
   RowBox[{
    RowBox[{"\[LeftAssociation]", 
     RowBox[{"\"\<Location\>\"", "\[Rule]", 
      RowBox[{"GeoPosition", "[", 
       RowBox[{"{", 
        RowBox[{"38.9", ",", 
         RowBox[{"-", "77.17"}]}], "}"}], "]"}]}], "\[RightAssociation]"}], 
    ",", 
    RowBox[{"<|", "|>"}]}], "]"}], " ", "//", " ", 
  "AbsoluteTiming"}]], "Input",
 CellChangeTimes->{{3.644845310831628*^9, 3.644845322424405*^9}, {
  3.645187600347135*^9, 3.64518761127739*^9}, {3.64518772221875*^9, 
  3.6451877275713367`*^9}, {3.645189482475893*^9, 3.6451894869822893`*^9}, {
  3.645193537528441*^9, 3.645193547731378*^9}, {3.645193581352693*^9, 
  3.6451936156157303`*^9}, {3.64561876405663*^9, 3.6456187682368383`*^9}, {
  3.645619324031198*^9, 3.645619329174954*^9}}],

Cell[BoxData[""], "Input",
 CellChangeTimes->{{3.644841706944292*^9, 3.644841707192595*^9}}]
}, Open  ]],

Cell[CellGroupData[{

Cell["Accumulate evidence of compliance risk", "Subsection",
 CellChangeTimes->{{3.644836698761153*^9, 3.64483670035527*^9}, {
  3.6448417292373343`*^9, 3.644841738747141*^9}, {3.645620231727523*^9, 
  3.645620238874596*^9}}],

Cell["Data structure (example):", "Text",
 CellChangeTimes->{{3.644842450904049*^9, 3.6448424552248507`*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"riskFactorsExample", " ", "=", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"0.1", ",", "\"\<A\>\""}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"0.2", ",", "\"\<B\>\""}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"0.15", ",", "\"\<C\>\""}], "}"}]}], "}"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.64484245900653*^9, 3.644842513803307*^9}, {
  3.644844870132118*^9, 3.644844875113431*^9}, {3.6448527871724157`*^9, 
  3.644852796426128*^9}, {3.645187796313923*^9, 3.645187800306025*^9}, {
  3.645618791144517*^9, 3.645618798649234*^9}}],

Cell[TextData[{
 "\nFunction that determines the cumulative risk based on all risk factors.  \
It uses the formula R = 1 - ",
 Cell[BoxData[
  FormBox[
   RowBox[{"(", 
    RowBox[{"1", "-", 
     SubscriptBox["r", "1"]}]}], TraditionalForm]],
  FormatType->"TraditionalForm"],
 ")(1 - r",
 Cell[BoxData[
  FormBox[
   SubscriptBox["", "2"], TraditionalForm]],
  FormatType->"TraditionalForm"],
 ")(1 - r",
 Cell[BoxData[
  FormBox[
   SubscriptBox["", "3"], TraditionalForm]],
  FormatType->"TraditionalForm"],
 ") ..., representing the compound risk of independent events."
}], "Text",
 CellChangeTimes->{{3.644842531182007*^9, 3.644842554122167*^9}, 
   3.644842913341627*^9, {3.6448429446867027`*^9, 3.644843134146347*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"cumulativeRisk", "[", "riskFactors_List", "]"}], " ", ":=", 
  RowBox[{"1", " ", "-", " ", 
   RowBox[{"Apply", "[", 
    RowBox[{"Times", ",", 
     RowBox[{"Map", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"1", "-", "#"}], "&"}], ",", 
       RowBox[{"Map", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"First", "[", "#", "]"}], "&"}], ",", "riskFactors"}], 
        "]"}]}], "]"}]}], "]"}]}]}]], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.6448428361323*^9, 3.644842854835503*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"cumulativeRisk", "[", "riskFactorsExample", "]"}]], "Input",
 CellChangeTimes->{{3.644842593967594*^9, 3.644842596299232*^9}, 
   3.64484286461908*^9, 3.644844883631962*^9, 3.645187806785222*^9}],

Cell[BoxData["0.3879999999999999`"], "Output",
 CellChangeTimes->{
  3.644842596799719*^9, 3.6448428656604023`*^9, 3.644844885177821*^9, 
   3.644848142872965*^9, {3.644852751072473*^9, 3.644852798454295*^9}}]
}, Open  ]],

Cell[BoxData[""], "Input",
 CellChangeTimes->{{3.644848115179146*^9, 3.6448481154294863`*^9}}]
}, Open  ]],

Cell[CellGroupData[{

Cell["Assign a color code", "Subsection",
 CellChangeTimes->{{3.644836698761153*^9, 3.64483670035527*^9}, {
  3.6448417292373343`*^9, 3.644841738747141*^9}, {3.644848191552621*^9, 
  3.644848193365114*^9}, {3.6456202461731253`*^9, 3.645620255577285*^9}}],

Cell["\<\
Determine the applicable color code (green, yellow, orange, red).\
\>", "Text",
 CellChangeTimes->{{3.644848232126494*^9, 3.6448482497028217`*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"colorCode", "[", "riskFactors_List", "]"}], " ", ":=", " ", 
  RowBox[{"Block", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"risk", " ", "=", 
      RowBox[{"cumulativeRisk", "[", "riskFactors", "]"}]}], "}"}], ",", 
    "\[IndentingNewLine]", 
    RowBox[{"Which", "[", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"risk", "\[GreaterEqual]", " ", "0.8"}], ",", " ", 
      "\"\<Red\>\"", ",", "\[IndentingNewLine]", 
      RowBox[{"risk", " ", "\[GreaterEqual]", " ", "0.5"}], ",", " ", 
      "\"\<Orange\>\"", ",", "\[IndentingNewLine]", 
      RowBox[{"risk", " ", ">", " ", "0"}], ",", " ", "\"\<Yellow\>\"", ",", 
      "\[IndentingNewLine]", "True", ",", " ", "\"\<Green\>\""}], " ", 
     "\[IndentingNewLine]", "]"}]}], "]"}]}]], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.644848253255794*^9, 3.644848374746516*^9}, {
  3.644848424015264*^9, 3.64484853165036*^9}, {3.6448486919725037`*^9, 
  3.644848692906701*^9}, {3.6448493373557253`*^9, 3.644849344245502*^9}, {
  3.6448725745295258`*^9, 3.6448725753702307`*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"colorCode", "[", "riskFactorsExample", "]"}]], "Input",
 CellChangeTimes->{{3.644848465407251*^9, 3.6448484768246193`*^9}, 
   3.645187817542829*^9}],

Cell[BoxData["\<\"Yellow\"\>"], "Output",
 CellChangeTimes->{3.6448485366600113`*^9, 3.644848697083941*^9, 
  3.644873308096553*^9}]
}, Open  ]],

Cell["\<\

Generate text to go along with the color code:\
\>", "Text",
 CellChangeTimes->{{3.64483155405504*^9, 3.644831562607005*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"colorCodeText", "[", "color_", "]"}], ":=", 
  RowBox[{"Switch", "[", 
   RowBox[{
   "color", ",", "\[IndentingNewLine]", "\"\<Green\>\"", ",", 
    "\"\<No risks identified\>\"", ",", "\[IndentingNewLine]", 
    "\"\<Yellow\>\"", ",", " ", "\"\<Moderate risk\>\"", ",", 
    "\[IndentingNewLine]", "\"\<Orange\>\"", ",", " ", 
    "\"\<Significant risk\>\"", ",", "\[IndentingNewLine]", "\"\<Red\>\"", 
    ",", " ", "\"\<Out of compliance\>\"", ",", "\[IndentingNewLine]", 
    "\"\<Black\>\"", ",", " ", "\"\<Unable to assess\>\""}], 
   "\[IndentingNewLine]", "]"}]}]], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.6448311855269833`*^9, 3.644831298506382*^9}}],

Cell["\<\

Generate a list of the risk factors in order of most to least risky:\
\>", "Text",
 CellChangeTimes->{{3.64484499098335*^9, 3.644845009101022*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"riskFactorsInOrder", "[", "riskFactors_List", "]"}], " ", ":=", 
  RowBox[{"Map", "[", 
   RowBox[{
    RowBox[{
     RowBox[{"#", "[", 
      RowBox[{"[", "2", "]"}], "]"}], "&"}], ",", 
    RowBox[{"Reverse", "[", 
     RowBox[{"Sort", "[", "riskFactors", "]"}], "]"}]}], "]"}]}]], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.64484492481493*^9, 3.644844937797514*^9}, {
  3.644844967864498*^9, 3.644844970126986*^9}}],

Cell[BoxData[
 RowBox[{"riskFactorsInOrder", "[", "riskFactorsExample", "]"}]], "Input",
 CellChangeTimes->{{3.644844973625065*^9, 3.644844978857932*^9}, {
  3.645187822041881*^9, 3.645187822285638*^9}}]
}, Open  ]]
}, Closed]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Applicable Law", "Chapter",
 CellChangeTimes->{{3.6448319693950377`*^9, 3.6448319736902943`*^9}, {
  3.645616758893923*^9, 3.645616765714375*^9}, {3.645620686492127*^9, 
  3.645620712219433*^9}}],

Cell["\<\
Data privacy and protection laws from around the world are encoded below.  \
The list currently includes only countries with a large number of English \
speakers.  Feel free to add other countries as necessary.\
\>", "Text",
 CellChangeTimes->{{3.645620967244821*^9, 3.645620990655381*^9}, {
  3.645621107092119*^9, 3.645621167040359*^9}}],

Cell["European Union", "Section",
 CellChangeTimes->{{3.645620549240179*^9, 3.645620552511867*^9}, {
  3.645620743919189*^9, 3.645620745274808*^9}},
 CellID->1165495935],

Cell["Australia", "Section",
 CellChangeTimes->{{3.645620549240179*^9, 3.645620552511867*^9}, {
  3.645620743919189*^9, 3.645620763889121*^9}, {3.6456207952258987`*^9, 
  3.645620796741658*^9}},
 CellID->738721222],

Cell["Canada", "Section",
 CellChangeTimes->{{3.645620549240179*^9, 3.645620552511867*^9}, {
  3.645620743919189*^9, 3.645620763889121*^9}},
 CellID->34],

Cell["India", "Section",
 CellChangeTimes->{{3.645620549240179*^9, 3.645620571793406*^9}, {
  3.645620767291108*^9, 3.6456207695161877`*^9}, {3.6456208481861134`*^9, 
  3.645620848701086*^9}},
 CellID->1084614847],

Cell["Nigeria", "Section",
 CellChangeTimes->{{3.645620549240179*^9, 3.645620571793406*^9}, {
  3.645620767291108*^9, 3.6456207695161877`*^9}, {3.6456208481861134`*^9, 
  3.645620848701086*^9}, {3.645620891023305*^9, 3.645620892185705*^9}, {
  3.6456209409330053`*^9, 3.645620941686264*^9}},
 CellID->2065060364],

Cell["Pakistan", "Section",
 CellChangeTimes->{{3.645620549240179*^9, 3.645620571793406*^9}, {
  3.645620767291108*^9, 3.6456207695161877`*^9}, {3.6456208481861134`*^9, 
  3.645620848701086*^9}, {3.645620891023305*^9, 3.645620892185705*^9}},
 CellID->1280537793],

Cell["United Kingdom", "Section",
 CellChangeTimes->{{3.645620549240179*^9, 3.645620571793406*^9}, {
  3.645620767291108*^9, 3.6456207695161877`*^9}, {3.645620951858017*^9, 
  3.645620952952984*^9}},
 CellID->1986318581],

Cell["United States", "Section",
 CellChangeTimes->{{3.645620549240179*^9, 3.645620571793406*^9}, {
  3.645620767291108*^9, 3.6456207695161877`*^9}},
 CellID->1054874149]
}, Open  ]]
}, Open  ]]
},
WindowSize->{1316, 1035},
WindowMargins->{{Automatic, -1455}, {Automatic, 0}},
FrontEndVersion->"10.1 for Mac OS X x86 (32-bit, 64-bit Kernel) (March 23, \
2015)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[CellGroupData[{
Cell[580, 22, 107, 1, 92, "Title"],
Cell[CellGroupData[{
Cell[712, 27, 248, 3, 65, "Chapter"],
Cell[CellGroupData[{
Cell[985, 34, 113, 2, 64, "Section",
 CellID->1862578396],
Cell[1101, 38, 1106, 27, 296, "Text"]
}, Closed]],
Cell[CellGroupData[{
Cell[2244, 70, 101, 2, 50, "Section",
 CellID->37],
Cell[CellGroupData[{
Cell[2370, 76, 100, 1, 44, "Subsection"],
Cell[2473, 79, 98, 1, 30, "Text"],
Cell[2574, 82, 2190, 47, 131, "Input",
 InitializationCell->True],
Cell[4767, 131, 94, 1, 28, "Input"]
}, Open  ]],
Cell[CellGroupData[{
Cell[4898, 137, 98, 1, 44, "Subsection"],
Cell[4999, 140, 197, 3, 30, "Text"],
Cell[5199, 145, 516, 10, 28, "Input"],
Cell[5718, 157, 573, 10, 28, "Input"],
Cell[6294, 169, 92, 1, 28, "Input"]
}, Open  ]]
}, Closed]],
Cell[CellGroupData[{
Cell[6435, 176, 169, 3, 50, "Section",
 CellID->922705572],
Cell[CellGroupData[{
Cell[6629, 183, 106, 1, 44, "Subsection"],
Cell[6738, 186, 270, 3, 30, "Text"],
Cell[7011, 191, 6845, 117, 369, "Input",
 InitializationCell->True],
Cell[13859, 310, 94, 1, 28, "Input"]
}, Open  ]],
Cell[CellGroupData[{
Cell[13990, 316, 121, 1, 44, "Subsection"],
Cell[14114, 319, 464, 10, 63, "Input"],
Cell[CellGroupData[{
Cell[14603, 333, 217, 4, 28, "Input"],
Cell[14823, 339, 97, 1, 28, "Output"]
}, Open  ]],
Cell[14935, 343, 92, 1, 28, "Input"]
}, Open  ]],
Cell[CellGroupData[{
Cell[15064, 349, 252, 3, 44, "Subsection"],
Cell[15319, 354, 648, 10, 30, "Text"],
Cell[15970, 366, 2453, 42, 165, "Input",
 InitializationCell->True],
Cell[18426, 410, 811, 18, 28, "Input"],
Cell[19240, 430, 92, 1, 28, "Input"]
}, Open  ]],
Cell[CellGroupData[{
Cell[19369, 436, 225, 3, 44, "Subsection"],
Cell[19597, 441, 109, 1, 30, "Text"],
Cell[19709, 444, 598, 14, 28, "Input"],
Cell[20310, 460, 727, 22, 51, "Text"],
Cell[21040, 484, 557, 16, 28, "Input",
 InitializationCell->True],
Cell[CellGroupData[{
Cell[21622, 504, 219, 3, 28, "Input"],
Cell[21844, 509, 209, 3, 28, "Output"]
}, Open  ]],
Cell[22068, 515, 94, 1, 28, "Input"]
}, Open  ]],
Cell[CellGroupData[{
Cell[22199, 521, 254, 3, 44, "Subsection"],
Cell[22456, 526, 157, 3, 30, "Text"],
Cell[22616, 531, 1087, 22, 131, "Input",
 InitializationCell->True],
Cell[CellGroupData[{
Cell[23728, 557, 173, 3, 28, "Input"],
Cell[23904, 562, 132, 2, 28, "Output"]
}, Open  ]],
Cell[24051, 567, 136, 4, 49, "Text"],
Cell[24190, 573, 713, 14, 131, "Input",
 InitializationCell->True],
Cell[24906, 589, 158, 4, 49, "Text"],
Cell[25067, 595, 468, 12, 28, "Input",
 InitializationCell->True],
Cell[25538, 609, 203, 3, 28, "Input"]
}, Open  ]]
}, Closed]]
}, Open  ]],
Cell[CellGroupData[{
Cell[25802, 619, 201, 3, 65, "Chapter"],
Cell[26006, 624, 349, 6, 49, "Text"],
Cell[26358, 632, 169, 3, 64, "Section",
 CellID->1165495935],
Cell[26530, 637, 214, 4, 50, "Section",
 CellID->738721222],
Cell[26747, 643, 153, 3, 50, "Section",
 CellID->34],
Cell[26903, 648, 213, 4, 50, "Section",
 CellID->1084614847],
Cell[27119, 654, 312, 5, 50, "Section",
 CellID->2065060364],
Cell[27434, 661, 262, 4, 50, "Section",
 CellID->1280537793],
Cell[27699, 667, 220, 4, 50, "Section",
 CellID->1986318581],
Cell[27922, 673, 170, 3, 50, "Section",
 CellID->1054874149]
}, Open  ]]
}, Open  ]]
}
]
*)

(* End of internal cache information *)
